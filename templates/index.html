{% extends 'base.html' %}
{% block body %}
    
    <h1>Automatic Sudoku Solver</h1>
    <p>Solve one of the sample sudokus or enter your own.</p>

    {% for sudoku in sudokus %} 
        <label for="sudoku_{{loop.index}}">{{sudoku.title}}: </label>
        <p id="sudoku_{{loop.index}}" class="fixed_sudoku">{{sudoku.board}}</p>
        <input type="button" value="Show" onclick="input_handler('{{loop.index}}')"/><br>

        <form method="post" action="{{ url_for('solver') }}"  id="sudoku_form_{{loop.index}}">
            <input type="hidden" name="board" id="sudoku{{loop.index}}_input" value={{sudoku.board}}>
            <input type="hidden" name="title" id="title_{{loop.index}}" value="{{sudoku.title}}">
            <input type="hidden" name="sudoko_number" value="{{loop.index}}">
        </form>
    {% endfor %}
 
    <form method="post" action="{{ url_for('solver') }}" autocomplete="off" id="sudoku_form_4">
        <label for="sudoku_4">Your Sudoku:</label>
        <input type="text" 
               name="board" id="sudoku4_input" maxlength="81" 
               placeholder="Enter your sudoku as 81 digit string">
        <input type="hidden" name="sudoko_number" value="4">
        <input type="hidden" name="title" id="title_4" value="Your Sudoku">
        <input type="button" value="Show" onclick ="input_handler(4)"/>
    </form>

    <p id="input_feedback"></p>
    <h4 id="sudoku_title">Sudoku</h4>

    {% include 'sudoku_board.html' %}


    <input id="solve_btn" type="button" value="Solve"/>

    <script src="../static/js/main.js"></script>


    {% if return_from_solver%}
        {% if sudoku_number == "4" %}
            <script>
                document.getElementById("sudoku4_input").value = "{{sudoku_string}}";
            </script>
        {% endif %}
        <script>
            show_board("{{sudoku_number}}", "{{sudoku_string}}");
        </script>
        {% if is_solvable == true %}
            <script>
                show_board("{{sudoku_number}}", "{{solved_sudoku}}", is_solution= true);
                const succes_mgs = '  ...<span class="succes">has been solved!</span>';
                document.getElementById("sudoku_title").innerHTML += succes_mgs;
            </script>
        {% else %}
            <script>
                const faiure_mgs = '  ...<span class="failure">has no solution!</span>';
                document.getElementById("sudoku_title").innerHTML += faiure_mgs;
            </script>
        {% endif %}
    {% else %}
        <script>
          input_handler(1);
        </script>
    {% endif %} 

{% endblock body %}