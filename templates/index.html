{% extends 'base.html' %}

{% block body %}

<h1>Sudoku Solver</h1>
<p>Solve one of the sample sudokus or enter your own custom sudoku</p>

<form action="/" style="display:inline" method="POST">
    <input type="submit" value="New Sample Sudoku"/>
</form>

<form action="/" style="display:inline" method="POST">
    <input type="hidden" name="custom" value="">
    <input type="submit" value="Custom Sudoku"/>
</form>


<p id="solution_feedback">&nbsp</p>
<h4 id="sudoku_title">{{title}}</h4>

<div class="container">
    {% include 'sudoku_board.html' %}
</div>

<form action="{{ url_for('solver') }}" method="post">
    <input type="hidden" id="sudoku" name="sudoku" value="{{sudoku}}">
    <input type="hidden" id="title" name="title" value="{{title}}">
    <input type="submit" value="Solve" id="solve_btn"/>
</form>

<form  id="custom_form" autocomplete="off" onkeydown="return event.key != 'Enter'">
    <input type="text" name="custom_input" id="custom_input" maxlength="81" 
    placeholder="Enter your sudoku (use digits)">
</form>

<p id="input_error">"Invalid input (only digits 0-9 are allowed)"</p>

<script src="../static/js/main.js"></script>

<script>
    show_board("{{sudoku}}");        
    "{% if title=='Your Sudoku'%}"
        document.getElementById("custom_form").style.visibility="visible";
        document.getElementById("custom_input").value=remove_trailing_zeros("{{sudoku}}");
        document.getElementById("custom_input").addEventListener('input', (event) => {
        input_handler();
       });
    "{% endif %}"
    "{% if return_from_solver %}"
        "{% if is_solvable == true %}"
            show_board("{{solved_sudoku}}", is_solution=true); 
            document.getElementById("solution_feedback").style.color = "green";
            document.getElementById("solution_feedback").innerHTML += "Solved using {{solution_method}}";
    "{% else %}"
            document.getElementById("solution_feedback").style.color = "red";
            document.getElementById("solution_feedback").innerHTML += "This sudoku has no solution!";
    "{% endif %}"
"{% endif %}"
</script>


{% endblock body %}